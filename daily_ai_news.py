import os
import json
import datetime
import requests
from build_engine import rebuild_all

# ì„¤ì • ë¡œë“œ
BASE_DIR = "/Users/kimsungwuk/StudioProjects/chloe-blog"

def get_journalistic_news():
    """
    ìµœê³ ì˜ ì €ë„ë¦¬ìŠ¤íŠ¸ ëª¨ë“œë¡œ ì‘ì„±ëœ 5ê°€ì§€ ê°œë³„ ë‰´ìŠ¤ ë°ì´í„°ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
    ì‹¤ì œ ìš´ì˜ ì‹œì—ëŠ” ì™¸ë¶€ APIë‚˜ ì›¹ í¬ë¡¤ë§ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.
    """
    print("ğŸ“° ìµœê³ ì˜ ì €ë„ë¦¬ìŠ¤íŠ¸ ëª¨ë“œë¡œ ìµœì‹  AI ë‰´ìŠ¤ë¥¼ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...")
    
    today = datetime.date.today().isoformat()
    
    # ì˜ˆì‹œ ë°ì´í„°: ê° ì£¼ì œë³„ë¡œ ìƒì„¸ ë¶„ì„ ë‚´ìš© í¬í•¨
    news_data = [
        {
            "title": "ì˜¤í”ˆAI ì˜¤í¼ë ˆì´í„° ì¶œì‹œ: ììœ¨í˜• ì—ì´ì „íŠ¸ ì‹œëŒ€ì˜ ê°œë§‰",
            "summary": "ì˜¤í”ˆAIê°€ ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ì§ì ‘ ì¡°ì‘í•˜ëŠ” ììœ¨í˜• AI ì—ì´ì „íŠ¸ 'ì˜¤í¼ë ˆì´í„°'ë¥¼ ê³µê°œí•˜ë©° ì‹¤í–‰ë ¥ ì¤‘ì‹¬ì˜ AI ì‹œëŒ€ë¥¼ ì„ ì–¸í–ˆìŠµë‹ˆë‹¤.",
            "image_url": "https://images.unsplash.com/photo-1677442136019-21780ecad995?auto=format&fit=crop&q=80&w=1000",
            "content": """ì¸ê³µì§€ëŠ¥ ê¸°ìˆ ì´ ë‹¨ìˆœíˆ ì§ˆë¬¸ì— ë‹µí•˜ëŠ” ìˆ˜ì¤€ì„ ë„˜ì–´, ì‚¬ìš©ìì˜ ì˜ë„ë¥¼ íŒŒì•…í•˜ê³  ì§ì ‘ í–‰ë™í•˜ëŠ” 'í–‰ë™í˜• AI'ë¡œ ì§„í™”í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì˜¤í”ˆAIê°€ ìµœê·¼ ë°œí‘œí•œ ììœ¨í˜• ì—ì´ì „íŠ¸ ì„œë¹„ìŠ¤ 'ì˜¤í¼ë ˆì´í„°(Operator)'ëŠ” ê·¸ ì •ì ì— ì„œ ìˆëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤.

ì˜¤í¼ë ˆì´í„°ëŠ” ê¸°ì¡´ì˜ ì±—ë´‡ê³¼ ë‹¬ë¦¬ ì»´í“¨í„° í™”ë©´ì„ ì¸ì‹í•˜ê³  ì›¹ë¸Œë¼ìš°ì €ë¥¼ ì§ì ‘ ì¡°ì‘í•˜ì—¬ ì—¬í–‰ ì˜ˆì•½, ë°ì´í„° ìˆ˜ì§‘, ë³µì¡í•œ ì†Œí”„íŠ¸ì›¨ì–´ ì‹¤í–‰ ë“±ì˜ ì—…ë¬´ë¥¼ ìŠ¤ìŠ¤ë¡œ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì´ëŠ” ë‹¨ìˆœí•œ ìë™í™”ë¥¼ ë„˜ì–´ AIê°€ ë…¼ë¦¬ì ì¸ íŒë‹¨ì„ ê±°ì³ ë‹¤ë‹¨ê³„ ì‘ì—…ì„ ì™„ìˆ˜í•  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

ì—…ê³„ ì „ë¬¸ê°€ë“¤ì€ ì´ë²ˆ ì¶œì‹œê°€ ê°œì¸ ë¹„ì„œ ì‹œì¥ë¿ë§Œ ì•„ë‹ˆë¼ ê¸°ì—…ì˜ ì—…ë¬´ í”„ë¡œì„¸ìŠ¤ ì „ë°˜ì— í˜ì‹ ì ì¸ ë³€í™”ë¥¼ ë¶ˆëŸ¬ì˜¬ ê²ƒìœ¼ë¡œ ë‚´ë‹¤ë³´ê³  ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ ì¸ê°„ ê°œë°œìê°€ ì½”ë”©í•˜ëŠ” ë°©ì‹ ë˜í•œ ì—ì´ì „íŠ¸ì™€ì˜ í˜‘ì—… ì¤‘ì‹¬ìœ¼ë¡œ ë¹ ë¥´ê²Œ ì¬í¸ë  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤."""
        },
        {
            "title": "êµ¬ê¸€ ì œë¯¸ë‚˜ì´ì˜ ì§„í™”: ì‹¤ì‹œê°„ ë©€í‹°ëª¨ë‹¬ ì¶”ë¡  ê¸°ìˆ  ì‹¬ì¸µ ë¶„ì„",
            "summary": "êµ¬ê¸€ì´ ì œë¯¸ë‚˜ì´ ì—…ë°ì´íŠ¸ë¥¼ í†µí•´ ì‹¤ì‹œê°„ ìŒì„± ë° ì‹œê° ì •ë³´ ì²˜ë¦¬ ì„±ëŠ¥ì„ ê·¹ëŒ€í™”í•˜ë©° êµ¬ê¸€ ìƒíƒœê³„ì™€ì˜ í†µí•©ì„ ê°€ì†í™”í•˜ê³  ìˆìŠµë‹ˆë‹¤.",
            "image_url": "https://images.unsplash.com/photo-1550751827-4bd374c3f58b?auto=format&fit=crop&q=80&w=1000",
            "content": """êµ¬ê¸€ì€ ìì‚¬ì˜ ì¸ê³µì§€ëŠ¥ ëª¨ë¸ì¸ ì œë¯¸ë‚˜ì´(Gemini)ì— ì‹¤ì‹œê°„ ë©€í‹°ëª¨ë‹¬ ì¶”ë¡  ê¸°ëŠ¥ì„ íƒ‘ì¬í•˜ë©° ì‚¬ìš©ì ê²½í—˜ì˜ ìƒˆë¡œìš´ ì§€í‰ì„ ì—´ì—ˆìŠµë‹ˆë‹¤. ì´ë²ˆ ì—…ë°ì´íŠ¸ì˜ í•µì‹¬ì€ ì§€ì—° ì‹œê°„ì„ í˜ì‹ ì ìœ¼ë¡œ ì¤„ì¸ ì‹¤ì‹œê°„ ìƒí˜¸ì‘ìš© ëŠ¥ë ¥ì…ë‹ˆë‹¤.

ì‚¬ìš©ìëŠ” ì´ì œ ì œë¯¸ë‚˜ì´ì™€ ëŒ€í™”í•˜ë©° ì¹´ë©”ë¼ë¥¼ í†µí•´ ì£¼ë³€ í™˜ê²½ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ë¶„ì„í•˜ê³ , êµ¬ê¸€ ê²€ìƒ‰ ì—”ì§„ì´ ë³´ìœ í•œ ë°©ëŒ€í•œ ì •ë³´ì™€ ê²°í•©ëœ ì…ì²´ì ì¸ ë‹µë³€ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” êµìœ¡, ê¸°ìˆ  ì§€ì›, ì°½ì‘ í™œë™ ë“± ë‹¤ì–‘í•œ ë¶„ì•¼ì—ì„œ AIì˜ í™œìš©ë„ë¥¼ íšê¸°ì ìœ¼ë¡œ ë†’ì—¬ì¤„ ê²ƒìœ¼ë¡œ ê¸°ëŒ€ë©ë‹ˆë‹¤.

êµ¬ê¸€ì€ í•˜ë“œì›¨ì–´ì™€ ì†Œí”„íŠ¸ì›¨ì–´ì˜ ìˆ˜ì§ ê³„ì—´í™”ë¥¼ í†µí•´ ì œë¯¸ë‚˜ì´ë¥¼ ì•ˆë“œë¡œì´ë“œ OS ë° êµ¬ê¸€ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì— ê¹Šìˆ™ì´ í†µí•©ì‹œí‚¤ê³  ìˆìœ¼ë©°, ì´ë¥¼ í†µí•´ ê¸€ë¡œë²Œ AI ì£¼ë„ê¶Œì„ ê³µê³ íˆ í•˜ë ¤ëŠ” ì „ëµì„ í¼ì¹˜ê³  ìˆìŠµë‹ˆë‹¤."""
        },
        {
            "title": "ì•¤ìŠ¤ë¡œí”½ í´ë¡œë“œ ì—…ë°ì´íŠ¸: ê°œë°œì ë„êµ¬ ê°•í™”ì™€ ë…¼ë¦¬ ì¶”ë¡ ì˜ ì •êµí™”",
            "summary": "ì•¤ìŠ¤ë¡œí”½ì´ í´ë¡œë“œ ëª¨ë¸ì˜ ë³µí•© ë…¼ë¦¬ ì¶”ë¡  ëŠ¥ë ¥ì„ ê°œì„ í•˜ê³  ì‹¤ë¬´ ê°œë°œìë¥¼ ìœ„í•œ ì „ìš© SDKë¥¼ ë°°í¬í•˜ë©° ê¸°ìˆ  ë¦¬ë”ì‹­ì„ ê°•í™”í–ˆìŠµë‹ˆë‹¤.",
            "image_url": "https://images.unsplash.com/photo-1611996575749-79a3a250f948?auto=format&fit=crop&q=80&w=1000",
            "content": """AI ëª¨ë¸ ê°„ì˜ ì„±ëŠ¥ ê²½ìŸì´ ì¹˜ì—´í•´ì§€ëŠ” ê°€ìš´ë°, ì•¤ìŠ¤ë¡œí”½ì€ í´ë¡œë“œ(Claude)ì˜ ì •êµí•œ ë…¼ë¦¬ ì¶”ë¡  ì„±ëŠ¥ì„ í•œì¸µ ë” ê°•í™”í–ˆìŠµë‹ˆë‹¤. íŠ¹íˆ ì†Œí”„íŠ¸ì›¨ì–´ ì—”ì§€ë‹ˆì–´ë§ ë¶„ì•¼ì—ì„œì˜ ë³µì¡í•œ ì½”ë“œ ë¶„ì„ ë° ì—ëŸ¬ í•´ê²° ëŠ¥ë ¥ì´ ë¹„ì•½ì ìœ¼ë¡œ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.

ì•¤ìŠ¤ë¡œí”½ì€ ì‹¤ë¬´ ê°œë°œìë“¤ì´ í´ë¡œë“œì˜ ê¸°ëŠ¥ì„ í”„ë¡œì íŠ¸ì— ì‰½ê²Œ í†µí•©í•  ìˆ˜ ìˆë„ë¡ ì „ìš© SDKë¥¼ ëŒ€ê±° ê³µê°œí–ˆìœ¼ë©°, ì´ëŠ” ê°œë°œ íš¨ìœ¨ì„±ì„ ê·¹ëŒ€í™”í•˜ëŠ” ê°•ë ¥í•œ ë„êµ¬ë¡œ ìë¦¬ ì¡ê³  ìˆìŠµë‹ˆë‹¤. í´ë¡œë“œ íŠ¹ìœ ì˜ ì•ˆì „í•˜ê³  ìœ¤ë¦¬ì ì¸ ë‹µë³€ ë°©ì‹ ë˜í•œ ê¸°ì—…ìš© AI ì‹œì¥ì—ì„œ í° ê°•ì ìœ¼ë¡œ ì‘ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.

ì´ë²ˆ ì—…ë°ì´íŠ¸ë¥¼ í†µí•´ í´ë¡œë“œëŠ” ë‹¨ìˆœí•œ ë„êµ¬ë¥¼ ë„˜ì–´ ê°œë°œìì™€ í•¨ê»˜ ê³ ë¯¼í•˜ê³  í•´ê²°ì±…ì„ ì°¾ì•„ê°€ëŠ” ì§„ì •í•œ í˜‘ì—… íŒŒíŠ¸ë„ˆë¡œì„œì˜ ì…ì§€ë¥¼ ë”ìš± ë‹¨ë‹¨íˆ í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤."""
        },
        {
            "title": "ì• í”Œì˜ ì˜¨ë””ë°”ì´ìŠ¤ AI ì „ëµ: í•˜ë“œì›¨ì–´ í˜ì‹ ì„ í†µí•œ í”„ë¼ì´ë²„ì‹œ ë³´í˜¸",
            "summary": "ì• í”Œì´ ì°¨ì„¸ëŒ€ ë‰´ëŸ´ ì—”ì§„ì„ íƒ‘ì¬í•œ ì‹ ê·œ ì›¨ì–´ëŸ¬ë¸” ê¸°ê¸° ê°œë°œ ì†Œì‹ì„ ì „í•˜ë©° ì˜¨ë””ë°”ì´ìŠ¤ AI ì¤‘ì‹¬ì˜ íì‡„í˜• ìƒíƒœê³„ í™•ì¥ì„ ì˜ˆê³ í–ˆìŠµë‹ˆë‹¤.",
            "image_url": "https://images.unsplash.com/photo-1460925895917-afdab827c52f?auto=format&fit=crop&q=80&w=1000",
            "content": """ì• í”Œì€ ì‚¬ìš©ì ë°ì´í„°ì˜ ë³´ì•ˆê³¼ í”„ë¼ì´ë²„ì‹œë¥¼ ìµœìš°ì„  ê°€ì¹˜ë¡œ ë‚´ì„¸ìš°ë©° ì˜¨ë””ë°”ì´ìŠ¤ AI(On-device AI) ê¸°ìˆ  ê°œë°œì— ë°•ì°¨ë¥¼ ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤. ìµœê·¼ ìœ ì¶œëœ ì •ë³´ì— ë”°ë¥´ë©´, ì• í”Œì€ ê°•ë ¥í•œ AI ì—°ì‚° ëŠ¥ë ¥ì„ ê°–ì¶˜ ì „ìš© ì¹©ì…‹ì„ íƒ‘ì¬í•œ ìŠ¤ë§ˆíŠ¸ ê¸€ë˜ìŠ¤ë¥¼ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.

í´ë¼ìš°ë“œ ì„œë²„ì— ë°ì´í„°ë¥¼ ì „ì†¡í•˜ì§€ ì•Šê³  ê¸°ê¸° ìì²´ì—ì„œ AI ì²˜ë¦¬ë¥¼ ì™„ê²°í•˜ëŠ” ë°©ì‹ì€ ë³´ì•ˆì— ë¯¼ê°í•œ ì‚¬ìš©ìë“¤ì—ê²Œ í° ë§¤ë ¥ìœ¼ë¡œ ë‹¤ê°€ì˜¬ ê²ƒì…ë‹ˆë‹¤. ë˜í•œ ì• í”Œì˜ ì—ì½”ì‹œìŠ¤í…œ ë‚´ ê¸°ê¸° ê°„ ì™„ë²½í•œ í†µí•©ì€ ì‚¬ìš©ìì—ê²Œ ëŠê¹€ ì—†ëŠ” ì§€ëŠ¥í˜• ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•  ê²ƒì…ë‹ˆë‹¤.

ì• í”Œì€ í•˜ë“œì›¨ì–´ ì œì¡° ì—­ëŸ‰ì„ ë°”íƒ•ìœ¼ë¡œ AIë¥¼ ì¼ìƒì˜ ì†Œí’ˆìœ¼ë¡œ ë…¹ì—¬ë‚´ëŠ” ì „ëµì„ ì·¨í•˜ê³  ìˆìœ¼ë©°, ì´ëŠ” í•˜ì´í…Œí¬ ê¸°ìˆ ì´ ëŒ€ì¤‘í™”ë˜ëŠ” ê³¼ì •ì—ì„œ ê²°ì •ì ì¸ ì—­í• ì„ í•  ê²ƒìœ¼ë¡œ ì „ë§ë©ë‹ˆë‹¤."""
        },
        {
            "title": "ì—”ë¹„ë””ì•„ ë¸”ë™ì›° ì•„í‚¤í…ì²˜: AI ì¸í”„ë¼ì˜ ê²½ì œì  í˜ëª…ì„ ì´ëŒë‹¤",
            "summary": "ì—”ë¹„ë””ì•„ì˜ ì°¨ì„¸ëŒ€ ì¹©ì…‹ ë¸”ë™ì›°ì´ ê³µê¸‰ì„ ì‹œì‘í•˜ë©´ì„œ AI ë°ì´í„°ì„¼í„°ì˜ ìš´ì˜ íš¨ìœ¨ê³¼ ì—°ì‚° ì„±ëŠ¥ì´ íšê¸°ì ìœ¼ë¡œ ê°œì„ ë˜ê³  ìˆìŠµë‹ˆë‹¤.",
            "image_url": "https://images.unsplash.com/photo-1550684848-fac1c5b4e853?auto=format&fit=crop&q=80&w=1000",
            "content": """ê¸€ë¡œë²Œ AI ì¸í”„ë¼ ì‹œì¥ì„ ì£¼ë„í•˜ëŠ” ì—”ë¹„ë””ì•„ê°€ ë¸”ë™ì›°(Blackwell) ì•„í‚¤í…ì²˜ ê¸°ë°˜ì˜ ì¹©ì…‹ ê³µê¸‰ì„ ë³¸ê²©í™”í•˜ë©° ì‹œì¥ì˜ ê¸°ëŒ€ê°ì„ ë†’ì´ê³  ìˆìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ ì•„í‚¤í…ì²˜ëŠ” ê¸°ì¡´ ì œí’ˆ ëŒ€ë¹„ ìˆ˜ì‹­ ë°° í–¥ìƒëœ ì„±ëŠ¥ì„ ì œê³µí•˜ë©´ì„œë„ ì „ë ¥ íš¨ìœ¨ì„±ì„ ê·¹ëŒ€í™”í–ˆìŠµë‹ˆë‹¤.

ì´ëŠ” ê±°ëŒ€ ì–¸ì–´ ëª¨ë¸(LLM)ì„ í•™ìŠµí•˜ê³  ìš´ì˜í•˜ëŠ” ë° ë“œëŠ” ë¹„ìš©ì„ íšê¸°ì ìœ¼ë¡œ ë‚®ì¶°ì¤„ ìˆ˜ ìˆì–´, ë‹¤ì–‘í•œ ê·œëª¨ì˜ ê¸°ì—…ë“¤ì´ AI ê¸°ìˆ ì„ ë„ì…í•˜ëŠ” ë° ê²°ì •ì ì¸ ì´‰ë§¤ì œ ì—­í• ì„ í•  ê²ƒì…ë‹ˆë‹¤. ì „ ì„¸ê³„ ì£¼ìš” í´ë¼ìš°ë“œ ì‚¬ì—…ìë“¤ì€ ì´ë¯¸ ë¸”ë™ì›° ê¸°ë°˜ì˜ ë°ì´í„°ì„¼í„° êµ¬ì¶•ì— ì—´ì„ ì˜¬ë¦¬ê³  ìˆìŠµë‹ˆë‹¤.

ì—”ë¹„ë””ì•„ì˜ ê¸°ìˆ  í˜ì‹ ì€ ë‹¨ìˆœíˆ ë°˜ë„ì²´ ì‹œì¥ì„ ë„˜ì–´ ì „ ì„¸ê³„ì ì¸ AI ì‚°ì—… ìƒíƒœê³„ì˜ ì„±ì¥ì„ ê²¬ì¸í•˜ê³  ìˆìœ¼ë©°, ì´ëŠ” í–¥í›„ AI ê¸°ìˆ ì˜ ëŒ€ì¤‘í™” ì†ë„ë¥¼ ë”ìš± ê°€ì†í™”í•  ì£¼ìš” ë³€ìˆ˜ê°€ ë  ê²ƒì…ë‹ˆë‹¤."""
        }
    ]
    return news_data

def create_daily_news_posts():
    today = datetime.date.today().isoformat()
    category = "AI ìµœì‹ ë‰´ìŠ¤"
    
    news_data_list = get_journalistic_news()
    
    # ë°ì´í„°ë² ì´ìŠ¤ ë¡œë“œ
    data_path = os.path.join(BASE_DIR, "config/posts_data.json")
    with open(data_path, "r", encoding="utf-8") as f:
        posts_data = json.load(f)

    newly_added = 0
    for item in news_data_list:
        title = item["title"]
        
        # ì¤‘ë³µ ë°©ì§€
        if not any(p['title'] == title for p in posts_data):
            posts_data.insert(0, {
                'title': title,
                'date': today,
                'category': category,
                'summary': item["summary"],
                'image_url': item["image_url"],
                'content': item["content"]
            })
            newly_added += 1
        
    if newly_added > 0:
        with open(data_path, "w", encoding="utf-8") as f:
            json.dump(posts_data, f, indent=4, ensure_ascii=False)
        
        # ì „ì²´ ì‚¬ì´íŠ¸ ì¬ë¹Œë“œ
        rebuild_all()
        print(f"ğŸ’° [ì„±ê³µ] ì´ {newly_added}ê°œì˜ ê°œë³„ ë‰´ìŠ¤ í¬ìŠ¤íŒ…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.")
        return True
    
    print("â­ï¸ ì´ë¯¸ ëª¨ë“  ìµœì‹  ì†Œì‹ì´ ì—…ë°ì´íŠ¸ë˜ì–´ ìˆìŠµë‹ˆë‹¤.")
    return False

if __name__ == "__main__":
    create_daily_news_posts()
